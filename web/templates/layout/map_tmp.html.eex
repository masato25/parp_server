<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Hello PAPR!</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
  <link rel="stylesheet" href="http://cache.amap.com/lbs/static/main1119.css"/>
  <script src="http://cache.amap.com/lbs/static/es5.min.js"></script>
  <script src="http://webapi.amap.com/maps?v=1.3&key=c4bfb792cf5b3121135c9d1712ef6a58"></script>
  <script type="text/javascript" src="http://cache.amap.com/lbs/static/addToolbar.js"></script>
</head>

<body>
  <main role="main">
    <%= render @view_module, @view_template, assigns %>
  </main>
  <script>
    var map = new AMap.Map('container', {
      resizeEnable: true,
      zoom:11,
      center: [116.205467,39.907761]
    })
    //map.clearMap();  // 清除地图覆盖物
    var mapg = '/images/parking_green1.png';
    var mapr = '/images/parking_status1.png'
    var markers = [{
      icon: mapg,
      position: [116.205467, 39.907761],
      content: 'a'
    }, {
      icon: mapg,
      position: [116.368904, 39.913423],
      content: 'b'
    }, {
      icon: mapr,
      position: [116.305467, 39.807761],
      content: 'c'
    }];
    markers.forEach(function(marker) {
      var mt = new AMap.Marker({
        map: map,
        icon: marker.icon,
        position: [marker.position[0], marker.position[1]],
      });
      mt.setLabel({
        offset: new AMap.Pixel(10, -25),
        content: marker.content
      })
    });
    var newCenter = map.setFitView();
    map.setMapStyle('amap://styles/macaron');
  </script>

</body>
</html>
